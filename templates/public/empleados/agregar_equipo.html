{% extends 'public/base_cpanel.html' %}
<title>{% block crud %} Agregar Nuevo Equipo {% endblock %}</title>
{% block body %}

<div class="card" style="border-radius: 0px !important">
    <div class="row justify-content-center mb-1">
        <div class="col-md-12 mb-1">
            <div class="banner text-center">
                <h3 class="banner-title mt-1 mb-1">Agregar Nuevo Equipo</h3>
            </div>
        </div>

        <div class="row justify-content-center mb-2">
            <div class="col-md-11">
                <!-- Acción del formulario apunta a la ruta en Flask -->
                <form action="/agregar_equipo" method="POST" enctype="multipart/form-data">
                    <!-- CSRF Token para seguridad -->

                    <div class="row">
                        <!-- Columna 1 -->
                        <div class="col-md-6">
                            <!-- Tipo de equipo -->
                            <div class="form-group mb-3">
                                <label for="tipo_equipo">Tipo de Equipo</label>
                                <select id="tipo_equipo" name="tipo_equipo" class="form-control" required>
                                    <option value="terminal">Terminal</option>
                                    <option value="portatil">Computador</option>
                                    <option value="televisor">Televisor</option>
                                    <option value="consola">Consola Video Juegos</option>
                                    <option value="reloj">Reloj Inteligente</option>
                                    <option value="audifono">Audifonos</option>
                                </select>
                            </div>

                            <!-- Marca -->
                            <div class="form-group mb-3">
                                <label for="marca">Marca</label>
                                <select id="marca" name="marca" class="form-control" required>
                                    <option value="Samsung">Samsung</option>
                                    <option value="Oppo">Oppo</option>
                                    <option value="Honor">Honor</option>
                                    <option value="Vivo">Vivo</option>
                                    <option value="Tecno">Tecno</option>
                                    <option value="Motorola">Motorola</option>
                                    <option value="Xiaomi">Xiaomi</option>
                                    <option value="Huawei">Huawei</option>
                                    <option value="Microsoft">Microsoft</option>
                                </select>
                            </div>

                            <!-- Gamma -->
                            <div class="form-group mb-3">
                                <label for="gamma">Gama</label>
                                <select id="gamma" name="gamma" class="form-control" required>
                                    <option value="Baja">Baja</option>
                                    <option value="Media">Media</option>
                                    <option value="Alta">Alta</option>
                                </select>
                            </div>

                            <!-- Nombre del equipo -->
                            <div class="form-group mb-3">
                                <label for="nombre_equipo">Nombre del Equipo</label>
                                <input type="text" id="nombre_equipo" name="nombre_equipo" class="form-control" required>
                            </div>
                        
                            
                        </div>
                        <!-- Descripción -->

                        <!-- Columna 2 -->
                        <div class="col-md-6">
                            

                            <!-- Características -->
                            <div class="row">
                                <!-- Cuadro 1 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica1">Camara</label>
                                        <input type="text" id="caracteristica1" name="caracteristica1" class="form-control" required>
                                    </div>
                                </div>
                                
                            
                                <!-- Cuadro 2 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica2">Pantalla</label>
                                        <input type="text" id="caracteristica2" name="caracteristica2" class="form-control" required>
                                    </div>
                                </div>
                            
                                <!-- Cuadro 3 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica3">Procesador</label>
                                        <input type="text" id="caracteristica3" name="caracteristica3" class="form-control" required>
                                    </div>
                                </div>
                        
                            
                            </div>
                            <div class="row">
                            
                                <!-- Cuadro 4 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica4">Bateria</label>
                                        <input type="text" id="caracteristica4" name="caracteristica4" class="form-control" required>
                                    </div>
                                </div>
                            
                                <!-- Cuadro 5 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica5">RAM</label>
                                        <input type="text" id="caracteristica5" name="caracteristica5" class="form-control" required>
                                    </div>
                                </div>
                            
                                <!-- Cuadro 6 -->
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="caracteristica6">Memoria</label>
                                        <input type="text" id="caracteristica6" name="caracteristica6" class="form-control" required>
                                    </div>
                                </div>
                            
                            </div>

                            <!-- Red -->
                            <div class="form-group mb-3">
                                <label>Red</label><br>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="red" id="4g" value="4g" required>
                                    <label class="form-check-label" for="4g"> 4G</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="red" id="5g" value="5g" required>
                                    <label class="form-check-label" for="5g"> 5G</label>
                                </div>
                            </div>

                            <!-- Colores -->
                            <div class="form-group mb-3">
                                <label for="colores">Colores</label>
                                <select id="colores" name="colores" class="form-control" multiple required>
                                    <option value="rojo">Rojo</option>
                                    <option value="azul">Azul</option>
                                    <option value="negro">Negro</option>
                                    <option value="blanco">Blanco</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="descripcion">Descripción</label>
                        <textarea id="descripcion" name="descripcion" class="form-control" rows="3" required></textarea>
                    </div>
                    <!-- Campos para imágenes -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label for="imagen1">Imagen 1</label>
                                <input type="file" id="imagen1" name="imagen1" class="form-control" accept="image/*" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label for="imagen2">Imagen 2</label>
                                <input type="file" id="imagen2" name="imagen2" class="form-control" accept="image/*" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label for="imagen3">Imagen 3</label>
                                <input type="file" id="imagen3" name="imagen3" class="form-control" accept="image/*" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label for="imagen4">Imagen 4</label>
                                <input type="file" id="imagen4" name="imagen4" class="form-control" accept="image/*" required>
                            </div>
                        </div>
                    </div>

                    <!-- Botón Guardar -->
                    <div class="text-center">
                        <button type="submit" id="guardarBtn" class="btn btn-primary"> <i class="bi bi-save"></i> Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- 🛑 Modal de Espera -->
<div class="modal fade" id="loadingModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-4">
            <div class="modal-body">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
                <h5 class="mt-3">Procesando, por favor espere...</h5>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block customJS %}
<!-- ✅ JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("equipoForm");
        const guardarBtn = document.getElementById("guardarBtn");
        const loadingModal = new bootstrap.Modal(document.getElementById("loadingModal"));

        form.addEventListener("submit", function (event) {
            // Mostrar el modal de espera
            loadingModal.show();

            // Deshabilitar el botón para evitar múltiples envíos
            guardarBtn.disabled = true;
        });
    });
</script>

{% endblock %}